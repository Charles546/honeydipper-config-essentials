<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>slack_bot</title><link rel="stylesheet" type="text/css" href="../../../../styles/main.css" /><script type="text/javascript" src="../../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic36"></a><div class="CTopic TSection LHoneydipperConfig first">
 <div class="CTitle"><span class="Qualifier">Essentials.&#8203;Systems.</span>&#8203;slack_bot</div>
 <div class="CBody"><div class="CHeading">Purpose</div><p>Using slack_bot to post messages, receive slash command and receive interactions.</p><div class="CHeading">Config</div><table class="CDefinitionList"><tr><td class="CDLEntry">url</td><td class="CDLDefinition"><p>the url given by slack for the incoming webhook integration</p></td></tr><tr><td class="CDLEntry">bot_token</td><td class="CDLDefinition"><p>used for chat.Postmessage to send message to any channel</p></td></tr><tr><td class="CDLEntry">interact_token</td><td class="CDLDefinition"><p>used for verify the received interaction request</p></td></tr><tr><td class="CDLEntry">slash_token</td><td class="CDLDefinition"><p>used for verify the received slash command request</p></td></tr><tr><td class="CDLEntry">path</td><td class="CDLDefinition"><p>the path part of the uri where the webhook is listening for slash command, defaults to /slack/slashcommand</p></td></tr></table><div class="CHeading">Synopsis</div><p>Below is an example config for the system</p><pre>---<br />systems:<br />  slack_bot:<br />    data:<br />      url: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]<br />      bot_token: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]<br />      interact_token: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]<br />      slash_token: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]<br />      path: &quot;/command&quot;</pre><p>You can also extend this system.</p><pre>---<br />systems:<br />  dev_channel:<br />    extends:<br />      - slack_bot<br />    data:<br />      url: ENC[&lt;decryption_driver&gt;,&lt;base64 encoded ciphertext&gt;]</pre><div class="CHeading">Notes</div><p>Use encryption for your url and token value for security</p></div>
</div>

<a name="Triggers"></a><a name="Topic37"></a><div class="CTopic TGroup LHoneydipperConfig">
 <div class="CTitle">Triggers</div>
</div>

<a name="interact"></a><a name="Topic38"></a><div class="CTopic TTrigger LHoneydipperConfig">
 <div class="CTitle">interact</div>
 <div class="CBody"><p>raised when user click on interactive buttons in the messages posted through slack integration. You don't use this trigger directly, instead just use the `suspend` workflow and the builtin `interact rule` will `resume` the the workflow with user input, when user click on some button.</p><div class="CHeading">Examples</div><p>Below is an example that respond to a simple slash command</p><pre>---<br />rules:<br />  - when:<br />      source:<br />        system: slack_bot<br />        trigger: slashcommand<br />  - do:<br />      type: if<br />      condition: '{{ eq (index .event.form.text 0) &quot;testcommand&quot; }}'<br />      content:<br />        - type: pipe<br />          content:<br />            - content: notify:<br />              data:<br />                chat_system: slack_bot<br />                message: ... some interactive message ...<br />            - type: suspend<br />              content: some_id<br />            - content: notify<br />              data:<br />                chat_system: slack_bot<br />                message: You clicked .....</pre></div>
</div>

<a name="slashcommand"></a><a name="Topic39"></a><div class="CTopic TTrigger LHoneydipperConfig">
 <div class="CTitle">slashcommand</div>
 <div class="CBody"><p>raised when receive a webhook from slack with a slashcommand, the payload will be in .event.form</p><div class="CHeading">Examples</div><p>Below is an example that respond to a simple slash command</p><pre>---<br />rules:<br />  - when:<br />      source:<br />        system: slack_bot<br />        trigger: slashcommand<br />  - do:<br />      type: if<br />      condition: '{{ eq (index .event.form.text 0) &quot;testcommand&quot; }}'<br />      content:<br />        - type: function<br />          content:<br />            target:<br />              system: slack_bot<br />              function: reply<br />            parameters:<br />              content:<br />                text: '{{ (index .event.form.user_name 0) }}' hello</pre></div>
</div>

<a name="Actions"></a><a name="Topic40"></a><div class="CTopic TGroup LHoneydipperConfig">
 <div class="CTitle">Actions</div>
</div>

<a name="say"></a><a name="Topic47"></a><div class="CTopic TAction LHoneydipperConfig last">
 <div class="CTitle">say</div>
 <div class="CBody"><p>post a message to slack using bot integration.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">content</td><td class="CDLDefinition"><p>the payload of the message, &quot;channel&quot; field will be recipient.</p></td></tr></table><p>See slack documents for detail on attachments and formatting.</p><div class="CHeading">Example</div><pre>---<br />rules:<br />  - when:<br />      ...<br />    <span class="SHKeyword">do</span>:<br />      target:<br />        system: slack_bot<br />        <span class="SHKeyword">function</span>: say<br />      parameters:<br />        content:<br />          attachments:<br />            - title: Honeydipper Message<br />              color: good<br />              text: Hello world<br />          channel: <span class="SHComment">#public_channel</span></pre><div class="CHeading">Notes</div><p>It is recommended to use <a href="../../../../index.html#HoneydipperConfigClass:Essentials.Workflows.notify" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,78);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >notify</a> abstract workflow. It can have multiple recipients and it works for all chat systems that supports &quot;say&quot; function.</p></div>
</div>

</body></html>