<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>gcloud-kms</title><link rel="stylesheet" type="text/css" href="../../../../styles/main.css" /><script type="text/javascript" src="../../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic16"></a><div class="CTopic TSection LHoneydipperConfig first">
 <div class="CTitle"><span class="Qualifier">Gcloud.&#8203;Drivers.</span>&#8203;gcloud-kms</div>
 <div class="CBody"><p>Decrypting config data using GCP KMS</p><div class="CHeading">Prereq</div><ul><li><p>include the gcloud bundle from this repo</p></li><li><p>Honeydipper must be running inside GCP with a service account with roles/cloudkms.cryptoKeyDecrypter</p></li></ul><div class="CHeading">Integration</div><p>Config the driver in the `drivers` section with following parameters.</p><ul><li><p>loglevel: the verbosity of logs generated by this driver, DEBUG, INFO, WARNING, ERROR</p></li><li><p>keyname: the keyname in KMS, projects/&lt;project name&gt;/locations/&lt;location&gt;/keyRings/&lt;key ring name&gt;/cryptoKeys/&lt;key name&gt;</p></li></ul><div class="CHeading">Example</div><pre>---<br />drivers:<br />  gloud-kms:<br />    loglevel: DEBUG<br />    keyname: projects/example/locations/us-west1-b/keyRings/example-ring/cryptoKeys/example-key</pre><div class="CHeading">Usage</div><p>Honeydipper supports eyaml format of encrypted content, just specify the the ciphertext and driver name in `ENC[...]`.</p><pre>---<br />systems:<br />  example-system:<br />    secret: ENC[gcloud-kms,&lt;... base64 encoded ciphertext ...&gt;]<br />    ...</pre></div>
</div>

<a name="RPCs"></a><a name="Topic17"></a><div class="CTopic TGroup LHoneydipperConfig">
 <div class="CTitle">RPCs</div>
</div>

<a name="decrypt"></a><a name="Topic18"></a><div class="CTopic TRPC LHoneydipperConfig last">
 <div class="CTitle">decrypt</div>
 <div class="CBody"><p>This RPC is used internally by Honeydipper and other drivers to decrypt content.</p><div class="CHeading">Parameters</div><ul><li><p>the whole dipper.Message raw payload is the ciphertext in `byte[]`</p></li></ul></div>
</div>

</body></html>